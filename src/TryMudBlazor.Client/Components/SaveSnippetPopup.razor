<div class="relative">
    <MudPopover Open="@Visible" AnchorOrigin="Origin.TopRight" Class="ml-4 px-4 pt-3 pb-2">
        <MudStack>
            <MudText Typo="Typo.h6">Save Public Snippet</MudText>
            <div>
                <MudText Typo="Typo.body2">Please do <b>NOT</b> include any personal data.</MudText>
                <MudText Typo="Typo.body2">Please do <b>NOT</b> include any copyrighted content.</MudText>
            </div>
        </MudStack>
        @if (string.IsNullOrWhiteSpace(SnippetLink))
        {
            <div>
                <MudButton Color="Color.Primary" Disabled="@Loading" @onclick="SaveAsync" Class="ml-n1">Confirm</MudButton>

                @if (Loading)
                {
                    <div class="spinner-border save-snippet-loader" role="status">
                        <span class="sr-only"></span>
                    </div>
                }
            </div>
        }
        else
        {
            <MudStack Spacing="1" Row="true" AlignItems="AlignItems.Center">
                <MudTextField Variant="Variant.Outlined" Margin="Margin.Dense" @bind-Value="SnippetLink" ReadOnly="true" Class="try-save-snippet-input" />
                <MudIconButton Icon="@(SnippetLinkCopied ? Icons.Material.Outlined.DoneAll : Icons.Material.Outlined.ContentCopy)" OnClick="CopyLinkToClipboard" Class="pa-2" Edge="Edge.End" />
            </MudStack>
        }
    </MudPopover>
    <MudOverlay Visible="Visible" OnClick="@(() => VisibleChanged.InvokeAsync(false))" />
</div>


